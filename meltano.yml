version: 1
default_environment: dev
project_id: c48d5eca-4f6c-45ab-af89-a7a7f875379a
send_anonymous_usage_stats: false
plugins:
  extractors:
    - name: tap-ccxt
      namespace: tap_ccxt
      pip_url: git+ssh://git@github.com/superkeyio/tap-ccxt.git
      capabilities:
        - state
        - catalog
        - discover
      settings:
        - name: start_date
        - name: exchanges
      config:
        exchanges:
          - id: binance
            symbols:
              - symbol: TRIBE/USDT
                timeframe: 1m
              - symbol: ETH/USDT
                timeframe: 1m
              - symbol: BTC/USDT
                timeframe: 1m
          - id: ftx
            symbols:
              - symbol: LOOKS/USD
                timeframe: 1m
          - id: gateio
            symbols:
              - symbol: FEI_USDT
                timeframe: 1m
              - symbol: RAI_USDT
                timeframe: 1m
        start_date: "2022-04-01T00:00:00Z"
  loaders:
    - name: target-postgres
      variant: transferwise
      pip_url: pipelinewise-target-postgres
      config:
        add_metadata_columns: true
        default_target_schema: $MELTANO_EXTRACT__LOAD_SCHEMA
        flush_all_streams: true
        parallelism: 2
  orchestrators:
    - name: airflow
      pip_url: apache-airflow==2.1.2 --constraint https://raw.githubusercontent.com/apache/airflow/constraints-2.1.2/constraints-${MELTANO__PYTHON_VERSION}.txt
  files:
    - name: airflow
      pip_url: git+https://gitlab.com/meltano/files-airflow.git
schedules:
  - name: ccxt-to-postgres
    extractor: tap-ccxt
    loader: target-postgres
    transform: skip
    interval: "* * * * *"
    start_date: 2022-04-01 00:00:00
environments:
  - name: dev
  - name: staging
  - name: prod
